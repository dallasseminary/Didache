@model Didache.UserTaskData
@{
   
}

@if (Model.TaskCompletionStatus != TaskCompletionStatus.Completed) {
	<input type="button" class="mark-completed task-submit" value="Mark Completed"  />
}
	
@if (Model.Task.IsSkippable && Model.TaskCompletionStatus == TaskCompletionStatus.NotStarted) {
	<input type="button" class="mark-skipped" value="Skip" />
} 

<script>


jQuery(function ($) {
	var 
		userID = @Model.UserID,
		taskID = @Model.TaskID,
		area = $('#task-' + userID + '-' + taskID + '');
	
	area.find('.mark-completed').click(function () {
		var button = $(this);

		sendTaskData(userID,taskID,{TaskStatus: 1},function(d) {
			setTaskStatus(userID,taskID,1);
			button.hide();
		});
	});
	area.find('.mark-skipped').click(function () {
		var button = $(this);

		sendTaskData(userID,taskID,{TaskStatus: -1},function(d) {
			setTaskStatus(userID,taskID,-1);
			button.hide();
		});
	});
});
</script>

