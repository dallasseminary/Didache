@model Thread
@{
	ViewBag.Title = "Thread Posts";
}

@{Html.RenderPartial("CourseHeader"); }

@{Html.RenderPartial("CourseMenu"); }



   <div id="breadcrumbs"><a href="/courses/@ViewContext.RouteData.Values["slug"]/schedule">@Model.Forum.Course.Name</a> &#9654; <a href="/courses/@ViewContext.RouteData.Values["slug"]/discussion/">@Model.Forum.Course.Name Discussion</a> &#9654; <a href="/courses/@ViewContext.RouteData.Values["slug"]/discussion/forum/@Model.Forum.ForumID">@Model.Forum.Name</a></div>

    <div class="forum-posts">
        <div class="header">
            <span class="poster">&nbsp;</span>
            <span class="subject">@Html.Raw(Model.Subject)</span>
        </div>
        <div class="posts">
			
			@Html.Partial("_WritePosts", Model.Posts.ToList())

	    </div>
    </div>

    <form class="forum-post-new" method="post" action="/courses/@ViewContext.RouteData.Values["slug"]/discussion/reply/@Model.ThreadID">
	     <input type="hidden" id="ThreadID" name="ThreadID" value="@Model.ThreadID" />
	     <input type="hidden" id="ForumID" name="ForumID" value="@Model.ForumID" />
	     <input type="hidden" id="ReplyToPostID" name="ReplyToPostID" value="@Model.LastPostID" />

	     <table style="width: 100%;">
		    <tbody>
			    <tr>
				    <td>Subject</td>
				    <td>
					    <input type="text" id="Subject" size="60" name="Subject" value="RE: @Html.Raw(Model.LastPostSubject)" />					
				    </td>
			    </tr>
			    <tr>
				    <td>Message</td>
				    <td>
					    <textarea id="PostContent" name="PostContent" cols="60" rows="5"></textarea>
				    </td>
			    </tr>
		    </tbody>
	     </table>

	     <input type="submit" value="Submit Reply" />

    </form>

    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $(".reply-link").show();
            $(".add-reply").hide();

            $(".reply-link a").toggle(function () {
                $(".add-reply").slideUp("fast");
                $(".forum-post-new").fadeOut("fast");
                $(this).parent().next(".add-reply").slideDown("slow");
                $(this).text("Cancel Reply");
            }, function () {
                $(this).parent().next(".add-reply").slideUp("slow");
                $(this).text("Reply");
            });

        });
    </script>